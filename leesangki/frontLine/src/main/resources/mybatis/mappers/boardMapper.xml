<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="board">
	<resultMap id="boardMap" type="com.spring.frontline.dto.BoardDTO">
	  <result column="board_seq" property="boardSeq"/>
	  <result column="user_seq" property="userSeq"/>
	  <result column="region_seq" property="regionSeq"/>
	  <result column="type_seq" property="typeSeq"/>
	  <result column="board_title" property="boardTitle"/>
	  <result column="board_address" property="boardAddress"/>
	  <result column="board_open" property="boardOpen"/>
	  <result column="board_detail" property="boardDetail"/>
	  <result column="board_regdate" property="boardRegDate"/>
	  <result column="board_break" property="boardBreak"/>
	  <result column="board_phone" property="boardPhone"/>
	  <result column="board_image" property="boardImage"/>
	</resultMap>
	
	<!-- 좋아요 순서대로 출력가능 -->
	<select id="selectBoardList" parameterType="java.util.HashMap" resultMap="boardMap">
		select * from (select rownum r, b.* from (select * from board_info where region_seq = #{regionSeq} and type_seq = #{typeSeq} order by board_seq) b) where r <![CDATA[>=]]> 1 and r <![CDATA[<=]]> 5
	</select>
	
	<!-- 놀거리 더보기 페이징 -->
	<select id="selectBoardPage" parameterType="java.util.HashMap" resultMap="boardMap">
	select *
	from(
		select rownum as rnum, tmp.*
		from(
			select board_info.*
			from board_info
			where region_seq = #{regionSeq} and type_seq = #{typeSeq}
			order by board_regdate
		) tmp
	)
	where rnum <![CDATA[>=]]> #{startNum} and rnum <![CDATA[<=]]> #{endNum}
	</select>
	
	<!-- 놀거리 더보기 개수 토탈 -->
	<select id="selectBoardTotal" parameterType="java.util.HashMap" resultType="int">
		select count(*)
		from board_info
		where region_seq = #{regionSeq} and type_seq = #{typeSeq}
	</select>
	
	<select id="selectRegionNames" resultType="java.lang.String">
		select region_name from board_region order by region_seq
	</select>
	
	<select id="selectBoard" parameterType="com.spring.frontline.dto.BoardDTO" resultMap="boardMap"> 
		select * from board_info where board_seq = #{boardSeq}
	</select>
</mapper>